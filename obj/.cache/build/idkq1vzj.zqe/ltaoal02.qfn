<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>OSIsoft Adapter for Modbus TCP data source configuration </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="OSIsoft Adapter for Modbus TCP data source configuration ">
    <meta name="generator" content="docfx 2.53.1.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../V1/index.html" width="46">
                <img id="logo" src="../../V1/main/V1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="OSIsoftAdapterForModbusTCPDataSourceConfiguration">
<h1 id="osisoft-adapter-for-modbus-tcp-data-source-configuration" sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="5" sourceendlinenumber="5">OSIsoft Adapter for Modbus TCP data source configuration</h1>

<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="7" sourceendlinenumber="7">To use the adapter, you must configure the data source from which it polls data.</p>
<h2 id="configure-modbus-tcp-data-source" sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="9" sourceendlinenumber="9">Configure Modbus TCP data source</h2>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="11" sourceendlinenumber="11"><strong>Note:</strong> You cannot modify Modbus TCP data source configurations manually. You must use the REST endpoints to add or edit the configuration.</p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="13" sourceendlinenumber="13">Complete the following procedure to configure a Modbus TCP data source:</p>
<ol sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="15" sourceendlinenumber="33">
<li sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="15" sourceendlinenumber="17"><p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="15" sourceendlinenumber="15">Using any text editor, create a file that contains a Modbus TCP data source in the JSON format.</p>
<ul sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="16" sourceendlinenumber="17">
<li sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="16" sourceendlinenumber="16">For content structure, see <a href="#modbus-tcp-data-source-examples" data-raw-source="[Modbus TCP data source examples](#modbus-tcp-data-source-examples)" sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="16" sourceendlinenumber="16">Modbus TCP data source examples</a>.</li>
<li sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="17" sourceendlinenumber="17">For a table of all available parameters, see <a href="#modbus-tcp-data-source-parameters" data-raw-source="[Modbus TCP data source parameters](#modbus-tcp-data-source-parameters)" sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="17" sourceendlinenumber="17">Modbus TCP data source parameters</a>.</li>
</ul>
</li>
<li sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="19" sourceendlinenumber="19"><p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="19" sourceendlinenumber="19">Save the file. For example, <code>DataSource.config.json</code>.</p>
</li>
<li sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="21" sourceendlinenumber="33"><p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="21" sourceendlinenumber="21">Use any of the <a class="xref" href="../main/V1/Configuration/Configuration%20tools.html" data-raw-source="[Configuration tools](xref:ConfigurationTools)" sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="21" sourceendlinenumber="21">Configuration tools</a> capable of making HTTP requests to execute a <code>PUT</code> command with the contents of that file to the following endpoint: <code>http://localhost:5590/api/v1/configuration/&lt;adapterId&gt;/DataSource/</code>.</p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="23" sourceendlinenumber="23"> <strong>Note:</strong> The following example uses Modbus1 as the adapter component name. For more information on how to add a component, see <a class="xref" href="../main/V1/Configuration/System%20components%20configuration.html" data-raw-source="[System components configuration](xref:SystemComponentsConfiguration)" sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="23" sourceendlinenumber="23">System components configuration</a>.</p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="25" sourceendlinenumber="25"> <code>5590</code> is the default port number. If you selected a different port number, replace it with that value.</p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="27" sourceendlinenumber="27"> Example using <code>curl</code>:</p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="29" sourceendlinenumber="29"> <strong>Note:</strong> Run this command from the same directory where the file is located.</p>
<pre sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="31" sourceendlinenumber="33"><code class="lang-bash">curl -d &quot;@DataSource.config.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT &quot;http://localhost:5590/api/v1/configuration/Modbus1/DataSource&quot;
</code></pre></li>
</ol>
<h2 id="modbus-tcp-data-source-schema" sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="35" sourceendlinenumber="35">Modbus TCP data source schema</h2>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="37" sourceendlinenumber="37">The full schema definition for the Modbus data source configuration is in the <code>Modbus_DataSource_schema.json</code> file located in one of the files listed below:</p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="39" sourceendlinenumber="39">Windows: <code>%ProgramFiles%\OSIsoft\Adapters\Modbus\Schemas</code></p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="41" sourceendlinenumber="41">Linux:  <code>/opt/OSIsoft/Adapters/Modbus/Schemas</code></p>
<h2 id="modbus-tcp-data-source-parameters" sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="43" sourceendlinenumber="43">Modbus TCP data source parameters</h2>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="45" sourceendlinenumber="45">The following parameters are available for configuring a Modbus TCP data source.</p>
<table sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="47" sourceendlinenumber="57">
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Devices</strong></td>
<td>Required</td>
<td>Array of objects</td>
<td>List of Modbus devices that this adapter instance reads. All devices read by the adapter share the common configuration defined in this table. For the properties that a device is comprised of, see the <a href="#devices" data-raw-source="[Devices](#devices)" sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="49" sourceendlinenumber="49">Devices</a> table.</td>
</tr>
<tr>
<td><strong>StreamIdPrefix</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>Specifies what prefix is used for Stream IDs. The naming convention is StreamIdPrefix.StreamId. An empty string means no prefix will be added to the Stream IDs and names. Null value defaults to ComponentID followed by a dot. <br><br><strong>Note:</strong> Every time you change the StreamIdPrefix of a configured adapter, for example when you delete and add a data source, you need to restart the adapter for the changes to take place. New streams are created on adapter restart and pre-existing streams are no longer updated.</td>
</tr>
<tr>
<td><strong>DefaultStreamIdPattern</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>Naming pattern used for creating Stream IDs when it is not specified for a data item. By default, this value is <br> <code>{DeviceId}.{UnitId}.{RegisterType}.{RegisterOffset}</code>.</td>
</tr>
<tr>
<td><strong>ConnectTimeout</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>Parameter to specify the TimeSpan to wait when the adapter is trying to connect to the data source. The value ranges from <code>1</code> sec to <code>30</code> sec, represented as TimeSpan strings 00:00:01 and 00:00:30, respectively. The default value is <code>5</code> sec, represented as 00:00:05.</td>
</tr>
<tr>
<td><strong>ReconnectInterval</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>Parameter to specify the TimeSpan to wait before retrying to connect to the data source when the data source is offline. The value ranges from <code>100</code> ms to <code>30</code> sec, represented as TimeSpan strings 00:00:00.1 and 00:00:30, respectively. The default value is <code>1</code> sec, represented as 00:00:01.</td>
</tr>
<tr>
<td><strong>RequestTimeout</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>Parameter to specify the TimeSpan that the adapter waits for a pending request before marking it as timeout and dropping the request. The default value is <code>10</code> sec, represented as the TimeSpan string 00:00:10. The value must be positive. There is no value range.</td>
</tr>
<tr>
<td><strong>DelayBetweenRequests</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>Parameter to specify the minimum TimeSpan between two successive requests sent to the data source. The value ranges from <code>0</code> sec to <code>1</code> sec, represented as TimeSpan strings 00:00:00 and 00:00:01, respectively. The default value is <code>0</code> sec, represented as 00:00:00.</td>
</tr>
<tr>
<td><strong>MaxResponseDataLength</strong></td>
<td>Optional</td>
<td>number</td>
<td>Parameter to limit the maximum length (in bytes) of data that can be read within one transaction. This feature is provided to support devices that limit the number of bytes that can be returned. If there is no device limitation, the request length should be the maximum length of <code>250</code> bytes. The value ranges from <code>2</code> to <code>250</code>. The default value is <code>250</code>.</td>
</tr>
<tr>
<td><strong>SimultaneousRequests</strong></td>
<td>Optional</td>
<td>number</td>
<td>Parameter to allow multiple simultaneous reads from a single IP address and port combination to prevent scan overruns when a lot of data is being read from a single device. The value ranges from 1 to 16. The default value is 1.</td>
</tr>
</tbody>
</table>
<h3 id="devices" sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="59" sourceendlinenumber="59">Devices</h3>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="61" sourceendlinenumber="61">The following parameters are available for configuring the &#39;Devices&#39; parameter of a Modbus TCP data source.</p>
<table sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="63" sourceendlinenumber="67">
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Id</strong></td>
<td>Required</td>
<td><code>string</code></td>
<td>The Id of the device that is used in data selection to associate a register with a device.</td>
</tr>
<tr>
<td><strong>IpAddress</strong></td>
<td>Required</td>
<td><code>string</code></td>
<td>The IP address of the device from which the data is collected using the Modbus TCP protocol. Host name is not supported.</td>
</tr>
<tr>
<td><strong>Port</strong></td>
<td>Optional</td>
<td>number</td>
<td>The TCP port of the target device that listens for and responds to Modbus TCP requests. The value ranges from <code>0</code> to <code>65535</code>. If you do not configure it, the default TCP port is <code>502</code>, which is the default port for Modbus TCP protocol.</td>
</tr>
</tbody>
</table>
<h2 id="modbus-tcp-data-source-examples" sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="69" sourceendlinenumber="69">Modbus TCP data source examples</h2>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="71" sourceendlinenumber="71">The following are examples of valid Modbus TCP data source configurations:</p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="73" sourceendlinenumber="73"><strong>Minimum data source configuration:</strong></p>
<pre sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="75" sourceendlinenumber="85"><code class="lang-json">{
    &quot;Devices&quot;:
    [
        {
            &quot;Id&quot;: &quot;Device1&quot;,
            &quot;IpAddress&quot;: &quot;127.0.0.1&quot;
        }
    ]
}
</code></pre><p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="87" sourceendlinenumber="87"><strong>Maximum data source configuration:</strong></p>
<pre sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="89" sourceendlinenumber="118"><code class="lang-json">{
    &quot;Devices&quot;:
    [
        {
            &quot;Id&quot;: &quot;Device1&quot;,
            &quot;IpAddress&quot;: &quot;127.0.0.1&quot;,
            &quot;Port&quot;: 502
        },
        {
            &quot;Id&quot;: &quot;Device2&quot;,
            &quot;IpAddress&quot;: &quot;127.0.0.2&quot;,
            &quot;Port&quot;: 502
        },
        {
            &quot;Id&quot;: &quot;Device3&quot;,
            &quot;IpAddress&quot;: &quot;127.0.0.3&quot;,
            &quot;Port&quot;: 502
        }
    ],
    &quot;StreamIdPrefix&quot;: &quot;my.prefix&quot;,
    &quot;DefaultStreamIdPattern&quot;: &quot;{DeviceId}.{UnitId}.{RegisterType}.{RegisterOffset}&quot;,
    &quot;ConnectTimeout&quot;: &quot;00:00:05&quot;,
    &quot;ReconnectInterval&quot;: &quot;00:00:01&quot;,
    &quot;RequestTimeout&quot;: &quot;00:00:10&quot;,
    &quot;DelayBetweenRequests&quot;: &quot;00:00:00.5&quot;,
    &quot;MaxResponseDataLength&quot;: 125,
    &quot;SimultaneousRequests&quot;: 1
}
</code></pre><h2 id="rest-urls" sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="120" sourceendlinenumber="120">REST URLs</h2>
<table sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="122" sourceendlinenumber="127">
<thead>
<tr>
<th>Relative URL</th>
<th>HTTP verb</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>api/v1/configuration/<em>ComponentId</em>/DataSource</td>
<td><code>GET</code></td>
<td>Retrieves the Modbus TCP data source configuration</td>
</tr>
<tr>
<td>api/v1/configuration/<em>ComponentId</em>/DataSource</td>
<td><code>POST</code></td>
<td>Creates the Modbus TCP data source configuration</td>
</tr>
<tr>
<td>api/v1/configuration/<em>ComponentId</em>/DataSource</td>
<td><code>PUT</code></td>
<td>Configures or updates the Modbus TCP data source configuration</td>
</tr>
<tr>
<td>api/v1/configuration/<em>ComponentId</em>/DataSource</td>
<td><code>DELETE</code></td>
<td>Deletes the Modbus TCP data source configuration</td>
</tr>
</tbody>
</table>
<p sourcefile="V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md" sourcestartlinenumber="129" sourceendlinenumber="129"><strong>Note:</strong> Replace <code>ComponentId</code> with the Id of your Modbus TCP component. For example, <code>Modbus1</code>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/OSIsoft-Adapter-Modbus-Docs/blob/master/V1/Configuration/OSIsoft Adapter for Modbus TCP data source configuration.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>© 2020 - OSIsoft, LLC.</span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
